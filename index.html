<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>マルチアングル</title>
</head>
<body oncontextmenu="return false;">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
        }

        body {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background: cornflowerblue;
        }

        .container {
            width: 1100px;
            height: 480px;
            display: flex;
            background: rgb(238, 236, 236);
        }

            .container .videos {
                width: 20%;
                padding: 1%;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
                overflow: auto; /* スクロールバーを追加 */
                overflow-x: hidden;
                /*IE(Internet Explorer)・Microsoft Edgeへの対応*/
                -ms-overflow-style: none;
            }

                /*Google Chrome、Safariへの対応*/
                .container .videos::-webkit-scrollbar {
                    display: none;
                }

                .container .videos video {
                    width: 95%;
                    height: 100px;
                    margin: 10px;
                    object-fit: cover;
                    cursor: pointer;
                    transition: 0.2s;
                }

                    .container .videos video:nth-child(1) {
                        margin-top: 0;
                    }

                    .container .videos video:hover,
                    .container .videos .active {
                        transform: scale(1.06);
                        border: 3px solid blue;
                    }

            .container .main-video {
                width: 80%;
                padding: 10px;
                position: relative; /* オーバーレイを重ねるための設定 */
            }

                .container .main-video video {
                    width: 100%;
                    height: 100%;
                    object-fit: cover;
                    border: 3px solid blue;
                }

                /* ボタンのスタイル */
                .container .main-video .overlay {
                    position: absolute;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background-color: rgba(0, 0, 0, 0.5);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    opacity: 0;
                    transition: opacity 0.3s ease-in-out;
                }

                .container .main-video:hover .overlay {
                    opacity: 1;
                }

                .container .main-video .overlay button {
                    padding: 10px;
                    margin: 5px;
                    font-size: 16px;
                    color: white;
                    background-color: rgba(0, 0, 0, 0.8);
                    border: none;
                    cursor: pointer;
                }
    </style>

    <div class="container">

        <div class="main-video">
            <video id="main-video" src="video.mp4"></video>
            <div class="overlay">
                <button id="play-button">再生</button>
                <button id="stop-button">停止</button>
                <button id="rewind-button">10秒巻き戻し</button>
                <button id="forward-button">10秒早送り</button>
            </div>
        </div>

        <div class="videos">
            <video class="active" src="video.mp4"></video>
            <video src="video1.mp4"></video>
            <video src="video2.mp4"></video>
            <video src="video3.mp4"></video>
            <video src="video4.mp4"></video>
            <video src="video5.mp4"></video>
            <video src="video6.mp4"></video>
            <video src="video7.mp4"></video>
        </div>

    </div>

    <!-- jquery cdn link -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script>

        $(document).ready(function () {

            var currentPlaybackTime = 0;

            $(document).ready(function () {
                // videosの全ての動画の音声オフ
                $('.videos video').prop('muted', true);

                // main-videoの再生状態を監視し、他の動画も同期させる
                $('#main-video').on('play', function () {
                    $('.videos video').each(function () {
                        this.play();
                    });
                });

                $('#main-video').on('pause', function () {
                    $('.videos video').each(function () {
                        this.pause();
                    });
                });

                // main-videoの再生位置を他の動画と同期させる
                $('#main-video').on('timeupdate', function () {
                    var currentTime = this.currentTime;
                    $('.videos video').each(function () {
                        if (Math.abs(currentTime - this.currentTime) > 0.1) { // 0.1秒以上の差がある場合にのみ更新する
                            this.currentTime = currentTime;
                        }
                    });
                });

            });


            $('#main-video').on('pause', function () {
                $('.videos video').each(function () {
                });
            });

            $('.videos video').click(function (event) {
                event.preventDefault();

                // 現在の再生位置を保存
                currentPlaybackTime = $('#main-video').get(0).currentTime;

                $(this).addClass('active').siblings().removeClass('active');

                var src = $(this).attr('src');

                // main-videoの再生位置を一時的にゼロにすることで遅延を解消
                $('#main-video').get(0).currentTime = 0;

                $('.main-video video')[0].src = src;
                $('.main-video video')[0].load();

                // 保存した再生位置を復元
                $('.main-video video').on('loadedmetadata', function () {
                    $('.main-video video')[0].currentTime = currentPlaybackTime;
                });

                // main-videoの再生を開始
                $('#main-video')[0].play();
            });

            // 再生ボタンのクリックイベント
            $('#play-button').click(function () {
                $('#main-video')[0].play();
            });

            // 停止ボタンのクリックイベント
            $('#stop-button').click(function () {
                $('#main-video')[0].pause();
            });

            // 10秒巻き戻しボタンのクリックイベント
            $('#rewind-button').click(function () {
                $('#main-video')[0].currentTime -= 10;
            });

            // 10秒早送りボタンのクリックイベント
            $('#forward-button').click(function () {
                $('#main-video')[0].currentTime += 10;
            });

        });

    </script>

</body>
</html>
